# RepoMap

## 1) Verified Environment
- `pwd` => `/Users/codymarchant/Documents/Projects/specsharp-claude` (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:10)
- `git rev-parse --show-toplevel` => `/Users/codymarchant/Documents/Projects/specsharp-claude` (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:11)
- `git branch --show-current` => `codex/w_matrix_coverage_report` (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:12)
- Repo root matched the required path and mapping continued. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:10)

Command transcript:
- `pwd` -> `/Users/codymarchant/Documents/Projects/specsharp-claude`
- `git rev-parse --show-toplevel` -> `/Users/codymarchant/Documents/Projects/specsharp-claude`
- `git branch --show-current` -> `codex/w_matrix_coverage_report`

## 2) Framework + Build/Run Commands
- Frontend stack is `React + Vite` (`vite` dev/build scripts, React deps, and Vite React plugin). Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:7) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:25) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:36)
- Frontend dev server is configured for port `3000` with strict port and `/api` proxy to backend `8001`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/vite.config.ts:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/vite.config.ts:9) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/vite.config.ts:12)
- Frontend start/build commands: `npm run dev`, `npm run build`, and helper `start-frontend.sh` (`npm run dev -- --port 3000`). Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:7) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/start-frontend.sh:15)
- Backend runtime is FastAPI with uvicorn launch command `uvicorn app.main:app --reload --host 0.0.0.0 --port 8001`; root script also has `backend:test` uvicorn command. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/main.py:51) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/start-backend.sh:22) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/package.json:6)
- `start-all.sh` points to `/Users/codymarchant/specsharp/...` instead of this repo path, so this launcher is legacy/misaligned for current root. Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/start-all.sh:19) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/start-all.sh:36)

## 3) Frontend Entrypoint + Routing Architecture
- Frontend entrypoint is `/src/main.tsx` from `index.html`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/index.html:99)
- `main.tsx` imports `./v2/App`, so V2 router is the active root app. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/main.tsx:6)
- V2 routing uses `BrowserRouter` + `Routes` and defines `/`, `/login`, `/dashboard`, `/new`, `/project/:id`, `/diagnostics`, `/signup`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:2) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:42) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:46) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:56) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:64) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:72) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:84) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:94)
- V1 router still exists (`src/App.tsx`) with `/scope/new` and `/project/:projectId`, but it is not the imported root app. Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:134) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:142) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/main.tsx:6)

## 4) Route -> Page -> Component Map
- `/new` -> `NewProject` page (`export const NewProject`) -> analyze/save flow in same page. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:64) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:61) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:734) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:831)
- `/project/:id` -> `ProjectView` -> `ProjectHeader` + `DealShieldView` or `ExecutiveViewComplete` or `ConstructionView`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:72) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:13) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:78) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:87) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:94) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:96)
- `ProjectView` defaults to `executive`, then auto-switches to `dealshield` after successful DealShield fetch unless user already selected a view. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:17) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:39) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:44)
- Project header tabs expose `DealShield`, `Executive View`, `Trade Breakdown` and drive `onViewChange`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectHeader.tsx:30) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectHeader.tsx:41) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectHeader.tsx:52)
- Dashboard navigates into this map via `/new` and `/project/${pid}` cards/buttons. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/Dashboard/Dashboard.tsx:88) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/Dashboard/Dashboard.tsx:128)
- Legacy route map exists in V1 (`/scope/new` -> `ScopeGenerator`, `/project/:projectId` -> `ProjectDetail`). Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:134) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:142)

## 5) Shared UI Component Map
- `LoadingSpinner` is shared by V2 app shell, project view loading state, and DealShield loading state. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/components/common/LoadingSpinner.tsx:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:34) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:56) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:790)
- `ErrorMessage` is shared by project view error boundary and DealShield fallback. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/components/common/ErrorMessage.tsx:9) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:57) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:794)
- `ProjectHeader` is shared across the project detail sub-views and controls the active view state. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectHeader.tsx:13) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:78)

## 6) Critical Components (Active/Legacy/Uncertain)
- `/new` project route/page: Active. Defined in V2 router and implemented by `NewProject`. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:64) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:61)
- Project details route/page: Active in V2 as `/project/:id` with `ProjectView`; Legacy alias exists in V1 as `/project/:projectId`. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:72) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:13) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:142)
- `ExecutiveViewComplete`: Active (render branch in `ProjectView`). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:94) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:118)
- `ConstructionView`: Active (render branch in `ProjectView`). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:96) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:308)
- `DealShield` (`DealShieldView` + backend DealShield endpoint/service): Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:87) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts:358) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:783) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py:927)
- `building_types` configs: Active source chain is `backend/app/v2/config/master_config.py` -> generated `shared/building_types.json` -> `frontend/src/core/buildingTaxonomy.ts`. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/shared/building_types.json:854) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/config/master_config.py:2) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/core/buildingTaxonomy.ts:4)
- `building_types` legacy parallel config in `frontend/src/config/buildingTypes.ts` tied to V1 `ScopeGenerator` surface. Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/config/buildingTypes.ts:19) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/components/ScopeGenerator.tsx:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:134)
- `building_subtypes` mapping in `frontend/src/v2/types/index.ts` exists but usage in active V2 mapped pages is not demonstrated by this audit. Status: Uncertain (defined, but active consumption not evidenced in mapped routes/components). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/types/index.ts:45) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:64) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:72)
- String/constants patterns are mixed: shared formatter/constants utilities plus page-local constants. Status: Active (mixed pattern). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/constants/index.ts:1) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/utils/formatters.ts:9) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:20) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:83) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:16)

## 7) Numeric Lineage Map (end-to-end)
- `NewProject` card `Total Project Cost` -> UI `formatCurrencySafe(totalProjectCostValue)` -> derived from `summaryTotals.total_project_cost` -> `result.calculations` from `analyzeDescription` -> hook calls `api.analyzeProject` -> frontend API posts `/analyze` -> backend `/analyze` calls `unified_engine.calculate_project` -> engine computes `total_project_cost = total_hard_costs + total_soft_costs` and returns `totals.total_project_cost`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:1423) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:903) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:734) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/hooks/useProjectAnalysis.ts:42) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts:235) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:315) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:435) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:831) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:985)
- `ExecutiveViewComplete` hero `TOTAL INVESTMENT REQUIRED` -> UI `formatters.currency(totalProjectCost)` -> `totalProjectCost = totals.total_project_cost` -> `totals = calculations.totals` -> `useProject` fetches via `api.getProject(id)` -> client maps backend `calculation_data` into `analysis.calculations` -> backend `/scope/projects/{project_id}` returns `format_project_response` including `calculation_data` parsed from DB. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1949) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1131) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:922) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/hooks/useProject.ts:40) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts:781) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts:804) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:755) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:775) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:1347) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:1523)
- `ConstructionView` headline construction total -> UI `formatCurrency(constructionTotal)` -> `constructionTotal` prefers `calculations.totals.hard_costs` with fallback literal `246900000` -> trade percentages derive from `tradeBaseTotal` built from `calculations.trade_breakdown` and normalized into `tradeBreakdown.*.percent`; backend provides `trade_breakdown` and `totals.hard_costs` from unified engine output. Status: Active with fallback risk. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:1137) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:396) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:399) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:545) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:584) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:611) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:983) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:1039)
- `DealShield` decision summary `Value Gap` -> UI shows `decisionSummary.valueGap` and `% of cost` -> frontend `decisionSummary` derives from payload or fallback `stabilized - total_cost` -> DealShield data fetched by `api.fetchDealShield(projectId)` -> backend DealShield endpoint builds view model -> service computes `stabilized_value = noi / cap_rate`, then `value_gap = stabilized_value - total_cost`, then sets `decision_summary.value_gap`/`value_gap_pct` in view model provenance. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:912) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:541) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:545) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts:358) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:783) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py:503) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py:520) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py:563) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py:972)
- `ExecutiveViewComplete` target NOI math -> `requiredNoi = totalProjectCost * targetYieldRate`, `noiGap = currentNoi - requiredNoi`, `noiGapPct = noiGap / requiredNoi`; DSCR backing value originates from backend debt metrics (`calculated_dscr = estimated_annual_noi / annual_debt_service`) and can be recalculated from revenue NOI before return. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1251) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1257) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1260) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:2206) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:2227) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:2164)

## 8) Config Ownership (building_types/building_subtypes/etc.)
- Canonical ownership for building type taxonomy is backend `master_config.py`; shared JSON explicitly says it is generated from that file. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/config/master_config.py:2) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/shared/building_types.json:854)
- Backend `MASTER_CONFIG` and helper `get_all_subtypes` are the subtype authority for engine/config resolution. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/config/master_config.py:417) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/config/master_config.py:707)
- Frontend active consumer path is `BuildingTaxonomy` importing shared JSON and used by `NewProject` display mapping. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/core/buildingTaxonomy.ts:4) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:910)
- `frontend/src/config/buildingTypes.ts` is a separate hardcoded taxonomy used by `ScopeGenerator` (V1 route surface). Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/config/buildingTypes.ts:19) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/components/ScopeGenerator.tsx:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:134)
- `frontend/src/v2/types/index.ts` contains `BUILDING_SUBTYPES` but this map was not proven wired into active mapped routes/components in this audit. Status: Uncertain (definition exists; active wiring not evidenced here). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/types/index.ts:45) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:64) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:72)

## 9) String/Constants Pattern
- Shared constants barrel exists (`constants/index.ts`) re-exporting grouped constant modules. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/constants/index.ts:1)
- V2 has centralized formatting helpers in `v2/utils/formatters.ts`, used for common display conversion logic. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/utils/formatters.ts:9)
- Page-local constants are common in active pages (`CITY_STATE_REGEX`, `FINISH_LEVELS`, DealShield display constants/options). Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:20) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:83) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:16) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:18)
- `frontend/src/config/api.ts` exports `API_CONFIG`, but this audit did not find evidence that active mapped routes/components consume it. Status: Uncertain (possible orphan/legacy utility). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/config/api.ts:1)

## 10) Where To Touch For Common Changes
- Add or change V2 routes: edit `frontend/src/v2/App.tsx`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx:40)
- Change `/new` workflow (input validation, analyze/save flow, summary cards): edit `frontend/src/v2/pages/NewProject/NewProject.tsx` and `frontend/src/v2/hooks/useProjectAnalysis.ts`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:725) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx:795) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/hooks/useProjectAnalysis.ts:18)
- Change project-detail tabs/layout: edit `frontend/src/v2/pages/ProjectView/ProjectView.tsx` and `frontend/src/v2/pages/ProjectView/ProjectHeader.tsx`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx:76) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectHeader.tsx:29)
- Change executive metrics cards/formulas: edit `frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx` and backend `backend/app/v2/engines/unified_engine.py`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1131) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx:1251) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:831)
- Change trade-breakdown behavior: edit `frontend/src/v2/pages/ProjectView/ConstructionView.tsx` and backend `backend/app/v2/engines/unified_engine.py` (`trade_breakdown`). Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx:545) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py:1039)
- Change DealShield scenario table/summary logic: edit `frontend/src/v2/pages/ProjectView/DealShieldView.tsx`, `frontend/src/v2/api/client.ts`, `backend/app/v2/api/scope.py`, `backend/app/v2/services/dealshield_service.py`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx:472) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts:358) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py:783) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py:927)
- Change building type/subtype taxonomy: edit backend `backend/app/v2/config/master_config.py` and regenerate/validate `shared/building_types.json`; frontend display mapper is `frontend/src/core/buildingTaxonomy.ts`. Status: Active. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/config/master_config.py:417) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/shared/building_types.json:854) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/core/buildingTaxonomy.ts:4)

## 11) Legacy Surface Area
- V1 router (`frontend/src/App.tsx`) remains in tree with legacy routes and lazy-loaded legacy components. Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:13) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:134) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:142)
- `ScopeGenerator` plus old building config path are legacy-aligned and tied to V1 route `/scope/new`. Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/components/ScopeGenerator.tsx:8) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx:134)
- `start-all.sh` hardcoded absolute paths target another repo location (`/Users/codymarchant/specsharp/*`). Status: Legacy. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/start-all.sh:19) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/start-all.sh:36)
- `BuildingTypeSelector.tsx` exists but active route/component wiring was not evidenced in this audit. Status: Uncertain. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/BuildingTypeSelector.tsx:46)

## 12) Open Uncertainties
- Frontend dev runtime in this environment could not start due bind permission (`EPERM`) on port 3000, so browser-level functional verification was blocked. Status: Uncertain (environment constraint, not script discovery). (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:142)
- `BUILDING_SUBTYPES` (`frontend/src/v2/types/index.ts`) may be dead code or indirectly consumed outside mapped files; direct active use was not evidenced in this mapping pass. Status: Uncertain. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/types/index.ts:45)
- `frontend/src/config/api.ts` may be unused or consumed by non-mapped code paths; active use was not evidenced in mapped files. Status: Uncertain. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/config/api.ts:1)

## 13) Evidence Index (unique file list used)
- `/Users/codymarchant/Documents/Projects/specsharp-claude/package.json`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/start-all.sh`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/start-backend.sh`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/start-frontend.sh`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/shared/building_types.json`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/main.py`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/api/scope.py`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/config/master_config.py`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/engines/unified_engine.py`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/backend/app/v2/services/dealshield_service.py`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/index.html`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/vite.config.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/main.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/App.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/components/Login.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/components/ScopeGenerator.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/config/api.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/config/buildingTypes.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/constants/index.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/core/buildingTaxonomy.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/pages/HomePage.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/App.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/api/client.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/components/common/ErrorMessage.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/components/common/LoadingSpinner.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/hooks/useProject.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/hooks/useProjectAnalysis.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/Dashboard/Dashboard.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/Diagnostics.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/BuildingTypeSelector.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/NewProject/NewProject.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ConstructionView.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/DealShieldView.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ExecutiveViewComplete.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectHeader.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/pages/ProjectView/ProjectView.tsx`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/types/index.ts`
- `/Users/codymarchant/Documents/Projects/specsharp-claude/frontend/src/v2/utils/formatters.ts`

## Runtime Proof (Phase 3 command transcript)
- Command attempted: `npm run dev` (workdir: `frontend`) (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/frontend/package.json:7)
- Exit code: `1` (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:143)
- Key output summary: Vite failed to start with `Error: listen EPERM: operation not permitted ::1:3000`. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:142)
- Localhost checks after failed start: `curl http://127.0.0.1:3000/` -> `000`, `curl http://localhost:3000/` -> `000`. (evidence: /Users/codymarchant/Documents/Projects/specsharp-claude/RepoMap.md:144)

Raw output excerpt:
- `> frontend@0.0.0 dev`
- `> vite`
- `error when starting dev server:`
- `Error: listen EPERM: operation not permitted ::1:3000`
- `exit code: 1`
- `curl 127.0.0.1:3000 => 000`
- `curl localhost:3000 => 000`
